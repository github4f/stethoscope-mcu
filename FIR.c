#include "FIR.h"
#include "dsp.h"    // For fractional definition
#include "DMA.h"    // For NUM_SAMPLES definition

// FIR filter coefficient buffer

// 1.5 kHz LPF
/*
fractional coefficients[FILTER_ORDER] __attribute__((space(xmemory), far)) = {
    0x0007, 0x0013, 0x0026, 0x0044, 0x006e, 0x00a7, 0x00f0, 0x0149, 0x01b1,
    0x0227, 0x02a7, 0x032c, 0x03b1, 0x0430, 0x04a3, 0x0504, 0x054d, 0x057a,
    0x058a, 0x057a, 0x054d, 0x0504, 0x04a3, 0x0430, 0x03b1, 0x032c, 0x02a7,
    0x0227, 0x01b1, 0x0149, 0x00f0, 0x00a7, 0x006e, 0x0044, 0x0026, 0x0013,
    0x0007
};
*/


// 3 kHz LPF
fractional coefficients[FILTER_ORDER] __attribute__((space(xmemory), far)) = {
    0x018a, 0x02a2, 0x02ea, 0x016b, 0xfd9e, 0xf7f9, 0xf228, 0xeef5, 0xf186, 
    0xfc53, 0x101a, 0x2b2e, 0x4978, 0x654f, 0x78ec, 0x7ffe, 0x78ec, 0x654f, 
    0x4978, 0x2b2e, 0x101a, 0xfc53, 0xf186, 0xeef5, 0xf228, 0xf7f9, 0xfd9e, 
    0x016b, 0x02ea, 0x02a2, 0x018a
};


/*
// Notch filter 5000 - 20000
fractional coefficients[FILTER_ORDER] __attribute__((space(xmemory), far)) = {
    0x0, 0xffa9, 0x87, 0x003c, 0x140, 0x026b, 0xfe5e, 0x253, 0xf712, 0xfc94,
    0xf962, 0x80b, 0x17a8, 0xfe1d, 0x47b3, 0x08c6, 0x6000, 0x08c6, 0x47b3,
    0xfe1d, 0x17a8, 0xf80b, 0xf962, 0xfc94, 0xf712, 0x253, 0xfe5e, 0x026b,
    0x140, 0x003c, 0x87, 0xffa9, 0x0,
};
 * */

// FIR filter delay buffer (hold x[n] x[n-1] ... x[n-M+1])
fractional xdelay[FILTER_ORDER] __attribute__((space(ymemory), far));

// Filtered signal output
fractional output_signal[NUM_SAMPLES] __attribute__((space(xmemory), far, 
        aligned(512)));
